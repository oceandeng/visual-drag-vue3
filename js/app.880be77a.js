(function(){var e={2028:function(e,t,n){"use strict";n.r(t),n.d(t,{commonStyle:function(){return o},commonAttr:function(){return a}});const o={rotate:0,opacity:1},a={animations:[],events:{},groupStyle:{},isLock:!1},l=[{component:"v-text",label:"文字",propValue:"双击编辑文字",icon:"wenben",style:{width:200,height:22,fontSize:14,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"",color:""}},{component:"v-button",label:"按钮",propValue:"按钮",icon:"button",style:{width:100,height:34,borderWidth:1,borderColor:"",borderRadius:"",fontSize:14,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"",color:"",backgroundColor:""}},{component:"Picture",label:"图片",icon:"tupian",propValue:n(862),style:{width:300,height:200,borderRadius:""}},{component:"rect-shape",label:"矩形",propValue:"&nbsp;",icon:"juxing",style:{width:200,height:200,fontSize:14,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",borderWidth:1,backgroundColor:"",borderStyle:"solid",borderRadius:"",verticalAlign:"middle"}}];for(let u=0,i=l.length;u<i;u++){const e=l[u];e.style={...o,...e.style},l[u]={...a,...e}}t["default"]=l},2059:function(e,t,n){"use strict";n.r(t);const o=["Picture","VButton","VText","RectShape"];t["default"]=o.map((e=>({key:e,component:n(3578)(`./${e}`).default})))},4769:function(e,t,n){"use strict";var o=n(9242),a=n(7147),l=n(678);const u=()=>Promise.resolve().then(n.bind(n,9722)),i=[{path:"/",name:"Home",component:u}],c=(0,l.p7)({history:(0,l.PO)(),routes:i});var s=c,r=n(9749);const p={namespaced:!0,state:()=>({editMode:"edit",canvasStyleData:{width:1200,height:900,scale:100}}),mutations:{setCanvasStyle(e,t){e.canvasStyleData=t},setEditMode(e,t){e.mode=t}},actions:{setShapeStyle({commit:e},t){e("component/setShapeStyle",t,{root:!0})}}};var d=n(4870);const m={namespaced:!0,state:()=>({componentData:[],curComponent:null,curComponentIndex:null,isClickComponent:!1}),mutations:{setClickComponentStatus(e,t){e.isClickComponent=t},addComponent(e,{component:t,index:n}){void 0!=n?e.componentData.splice(n,1):e.componentData.push(t)},setCurComponent(e,{component:t,index:n}){e.curComponent=t,e.curComponentIndex=n},setShapeStyle(e,{top:t,left:n,width:o,height:a,rotate:l}){t&&(e.curComponent.style.top=t),n&&(e.curComponent.style.left=n),o&&(e.curComponent.style.width=o),a&&(e.curComponent.style.height=a),l&&(e.curComponent.style.rotate=l)},setComponentData(e,t=[]){e.componentData=(0,d.qj)(t)},deleteComponent(e,t){void 0===t&&(t=e.curComponentIndex),t==e.curComponentIndex&&(e.curComponentIndex=null,e.curComponent=null),/\d/.test(t)&&e.componentData.splice(t,1)}}};var f=n(2648);const v={namespaced:!0,state:()=>({editor:null}),mutations:{getEditor(e,t){e.editor=(0,f.$)(t)}}},h={namespaced:!0,state:()=>({snapshotData:[],snapshotIndex:-1}),actions:{undo({state:e,commit:t,rootState:n}){if(e.snapshotIndex>=0){e.snapshotIndex--;const o=(0,f.p$)(e.snapshotData[e.snapshotIndex])||[];if(n.component.curComponent){const e=!o.find((e=>n.component.curComponent.id==e.id));e&&t("component/setCurComponent",{component:null,index:null},{root:!0})}t("component/setComponentData",o,{root:!0})}},redo({state:e,commit:t}){e.snapshotIndex<e.snapshotData.length-1&&(e.snapshotIndex++,t("component/setComponentData",(0,f.p$)(e.snapshotData[e.snapshotindex]),{root:!0}))},recordSnapshot({state:e,rootState:t}){e.snapshotData[++e.snapshotIndex]=(0,f.p$)(t.component.componentData),e.snapshotIndex<e.snapshotData.length-1&&(e.snapshotData=e.snapshotData.slice(0,e.snapshotIndex+1))}}},y={namespaced:!0,state:()=>({menuTop:0,menuLeft:0,menuShow:!1}),mutations:{showContextmenu(e,{top:t,left:n}){e.menuShow=!0,e.menuTop=t,e.menuLeft=n},hideContextmenu(e){e.menuShow=!1}}};var b=n(5574);function g(e="",t="error",n=1500){(0,b.z8)({message:e,type:t,duration:n})}const w={namespaced:!0,state:()=>({copyData:null,isCut:!1}),actions:{copy({state:e,commit:t,rootState:n}){n.component.curComponent?(x(e,t,n),S(e,n),e.isCut=!1):g("请选择组件")},paste({state:e,commit:t,rootState:n},o){if(!e.copyData)return void g("请选择组件");const a=e.copyData.data;o?(a.style.top=n.contextmenu.menuTop,a.style.left=n.contextmenu.menuLeft):(a.style.top+=10,a.style.left+=10),a.id=(0,f.y)(),"Group"===a.component&&a.propValue.forEach((e=>{e.id=(0,f.y)()})),t("component/addComponent",{component:(0,f.p$)(a)},{root:!0}),e.isCut&&(e.copyData=null)},cut({state:e,commit:t,rootState:n}){n.component.curComponent?(x(e,t,n),S(e,n),t("component/deleteComponent",null,{root:!0}),e.isCut=!0):g("请选择组件")}}};function x(e,t,n){if(e.isCut&&e.copyData){const o=(0,f.p$)(e.copyData.data),a=e.copyData.index;o.id=(0,f.y)(),t("component/addComponent",{component:o,index:a},{root:!0}),n.component.curComponentIndex>=a&&n.component.curComponentIndex++}}function S(e,t){e.copyData={data:(0,f.p$)(t.component.curComponent),index:t.component.curComponentIndex}}const k={namespaced:!0,actions:{lock({rootState:e}){e.component.curComponent.isLock=!0},unLock({rootState:e}){e.component.curComponent.isLock=!1}}},C={namespaced:!0,actions:{upComponent({rootState:e}){const{componentData:t,curComponentIndex:n}=e.component;n<t.length-1?(0,f.LF)(t,n,n+1):g("已经到顶了")},downComponent({rootState:e}){const{componentData:t,curComponentIndex:n}=e.component;n>0?(0,f.LF)(t,n,n-1):g("已经到底了")},topComponent({rootState:e}){const{componentData:t,curComponentIndex:n,curComponent:o}=e.component;n<t.length-1?(t.splice(n,1),t.push(o)):g("已经到顶了")},bottomComponent({rootState:e}){const{componentData:t,curComponentIndex:n,curComponent:o}=e.component;n>0?(t.splice(n,1),t.unshift(o)):g("已经到底了")}}},U={namespaced:!0,actions:{addAnimation({rootState:e},t){const{curComponent:n}=e.component;n.animations.push(t)},removeAnimation({rootState:e},t){const{curComponent:n}=e.component;n.animations.splice(t,1)},alterAnimation({rootState:e},{index:t,data:n={}}){const{curComponent:o}=e.component;if("number"===typeof t){const e=o.animations[t];o.animations[t]={...e,...n}}}}},_={namespaced:!0,actions:{addEvent({rootState:e},{event:t,param:n}){e.component.curComponet.events[t]=n},removeEvent({rootState:e},t){delete e.component.curComponet.events[t]}}},D=(0,r.MT)({modules:{public:p,component:m,compose:v,snapshot:h,contextmenu:y,copy:w,lock:k,layer:C,animation:U,event:_}});var V=D,I=n(2059),M=(n(4415),n(3396));function L(e,t,n,o,a,l){const u=(0,M.up)("Home");return(0,M.wg)(),(0,M.j4)(u)}var O=n(9722),j={name:"App",components:{Home:O["default"]}},W=n(89);const R=(0,W.Z)(j,[["render",L]]);var H=R;const P=(0,o.ri)(H);P.use(a.Z),P.use(s),P.use(V),I["default"].forEach((e=>{P.component(e.key,e.component)})),P.mount("#app")},2648:function(e,t,n){"use strict";n.d(t,{p$:function(){return a},y:function(){return u},$:function(){return i},LF:function(){return c}});var o=n(4870);function a(e){if("object"==typeof e){const t=Array.isArray(e)?[]:{};for(const n in e)"object"==typeof e[n]?t[n]=a(e[n]):t[n]=e[n];return t}return e}let l=0;function u(){return l++}function i(e){return document.querySelector(e)}function c(e,t,n){const a=e[t];e[t]=(0,o.qj)(e[n]),e[n]=(0,o.qj)(a)}},3192:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var o=n(3396);const a={style:{overflow:"hidden"}},l=["src"];var u={props:{propValue:{type:String,require:!0},element:{type:Object,default:()=>{}}},setup(e){return(t,n)=>((0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("img",{src:e.propValue},null,8,l)]))}},i=n(89);const c=(0,i.Z)(u,[["__scopeId","data-v-1335c85d"]]);var s=c},6442:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n(3396);const a={class:"rect-shape"};var l={props:{propValue:{type:String,require:!0,default:""},element:{type:Object,default:()=>{}}},setup(e){return(t,n)=>{const l=(0,o.up)("v-text");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(l,{"prop-value":e.element.propValue,element:e.element},null,8,["prop-value","element"])])}}},u=n(89);const i=(0,u.Z)(l,[["__scopeId","data-v-56a5191c"]]);var c=i},9958:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var o=n(3396),a=n(7139);const l={class:"v-button"};var u={props:{propValue:{type:String,default:""},element:{type:Object,default:()=>{}}},setup(e){return(t,n)=>((0,o.wg)(),(0,o.iD)("button",l,(0,a.zw)(e.propValue),1))}},i=n(89);const c=(0,i.Z)(u,[["__scopeId","data-v-2997bc52"]]);var s=c},4169:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var o=n(4870),a=n(3396),l=n(7139),u=n(9749);const i=["tabindex","innerHTML"],c={key:1,class:"v-text preview"},s=["innerHTML"];var r={props:{propValue:{type:String,default:""},element:{type:Object,default:()=>{}}},setup(e){const t=(0,u.oR)(),n=(0,a.Fl)((()=>t.state.public.editMode)),r=!0;function p(){}function d(){}function m(){}function f(){}function v(e){}return(t,u)=>"edit"==(0,o.SU)(n)?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"v-text",onKeydown:u[0]||(u[0]=(...e)=>t.handleKeydown&&t.handleKeydown(...e)),onKeyup:u[1]||(u[1]=(...e)=>t.handleKeyup&&t.handleKeyup(...e))},[(0,a._)("div",{ref:"text",contenteditable:r,class:(0,l.C_)({canEdit:r}),tabindex:e.element.id,style:(0,l.j5)({verticalAlign:e.element.style.verticalAlign}),onDblclick:p,onPaste:d,onMousedown:m,onBlur:f,onInput:v,innerHTML:e.element.propValue},null,46,i)],32)):((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",{style:(0,l.j5)({verticalAlign:e.element.style.verticalAlign}),innerHTML:e.element.propValue},null,12,s)]))}},p=n(89);const d=(0,p.Z)(r,[["__scopeId","data-v-2ca08d5b"]]);var m=d},9722:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ut}});var o=n(3396),a=n(9749),l=n(4870),u=n(5574),i=n(1373),c=(0,i.Z)(),s=n(7139);function r(e){return e*Math.PI/180}function p(e,t,n){const o=r(n);return{x:Math.cos(o)*(e.x-t.x)-Math.sin(o)*(e.y-t.y)+t.x,y:Math.sin(o)*(e.x-t.x)+Math.cos(o)*(e.y-t.y)+t.y}}function d(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}}function m(e,t){return e*parseInt(t)/100}function f(e){return(e+360)%360}async function v(e,t=[]){const n=t=>new Promise((n=>{const{animationTime:o,value:a="",isLoop:l}=t;e.style.setProperty("--time",o+"s"),e.classList.add(a,"animated",h(l));const u=()=>{e.removeEventListener("animationend",u),e.removeEventListener("animationcancel",u),e.classList.remove(a,"animated",h(l)),e.style.removeProperty("--time"),n()};e.addEventListener("animationend",u),e.addEventListener("animationcancel",u)}));for(let o=0,a=t.length;o<a;o++)await n(t[o])}function h(e){return e?"infinite":"no-infinite"}const y=[{key:"left",label:"x 坐标"},{key:"top",label:"y 坐标"},{key:"width",label:"宽"},{key:"height",label:"高"},{key:"color",label:"颜色"},{key:"backgroundColor",label:"背景色"},{key:"borderWidth",label:"边框宽度"},{key:"borderStyle",label:"边框风格"},{key:"borderColor",label:"边框颜色"},{key:"borderRadius",label:"边框半径"},{key:"fontSize",label:"字体大小"},{key:"fontWeight",label:"字体粗细"},{key:"lineHeight",label:"行高"},{key:"letterSpacing",label:"字间距"},{key:"textAlign",label:"左右对齐"},{key:"verticalAlign",label:"上下对齐"},{key:"opacity",label:"透明度"}];function b(e,t=[]){const n=["fontSize","width","height","top","left","borderWidth","letterSpacing","borderRadius"],o={};return Object.keys(e).forEach((a=>{t.includes(a)||("rotate"!=a?(o[a]=e[a],n.includes(a)&&(o[a]+="px")):o.transform=`${a}(${e[a]}deg)`)})),o}function g(e,t=[]){const n=Reflect.apply(Array.prototype.slice,t,[]);let o={};return n.forEach((t=>{"rotate"!=t?o[t]=`${e[t]}px`:o.transform=`${t}(${e[t]}deg)`})),o}const w={redirect(e){e&&(window.location.href=e)},alert(e){e&&alert(e)}},x=[{key:"redirect",label:"跳转事件",event:w.redirect,param:""},{key:"alert",label:"alert 事件",event:w.alert,param:""}];var S={props:{config:{type:Object,require:!0,default:()=>{}}},setup(e){const t=e,n=(0,l.iH)(null);function a(){const e=t.config.events;Object.keys(e).forEach((t=>{[t](e[t])}))}return(0,o.bv)((()=>{v(n.value,t.config.animations)})),(t,u)=>((0,o.wg)(),(0,o.iD)("div",{onClick:a,ref_key:"wrapperRef",ref:n},[((0,o.wg)(),(0,o.j4)((0,o.LL)(e.config.component),{class:"component",style:(0,s.j5)((0,l.SU)(b)(e.config.style)),"prop-value":e.config.propValue,element:e.config},null,8,["style","prop-value","element"]))],512))}},k=n(89);const C=(0,k.Z)(S,[["__scopeId","data-v-7294766c"]]);var U=C;const _={key:0,class:"bg"},D=(0,o.Uk)("关闭"),V={class:"canvas-container"};var I={props:{modelValue:{type:Boolean,default:!0}},setup(e,{emit:t}){const n=(0,a.oR)(),u=(0,o.Fl)((()=>n.state.component.componentData)),i=(0,o.Fl)((()=>n.state.public.canvasStyleData));function c(){console.log(11),t("update:modelValue",!1)}return(t,n)=>{const a=(0,o.up)("el-button");return e.modelValue?((0,o.wg)(),(0,o.iD)("div",_,[(0,o.Wm)(a,{class:"close",onClick:c},{default:(0,o.w5)((()=>[D])),_:1}),(0,o._)("div",V,[(0,o._)("div",{class:"canvas",style:(0,s.j5)({width:(0,l.SU)(m)((0,l.SU)(i).width)+"px",height:(0,l.SU)(m)((0,l.SU)(i).height)+"px"})},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,l.SU)(u),((e,t)=>((0,o.wg)(),(0,o.j4)(U,{key:t,config:e},null,8,["config"])))),128))],4)])])):(0,o.kq)("",!0)}}};const M=(0,k.Z)(I,[["__scopeId","data-v-2e18e6a4"]]);var L=M;const O=e=>((0,o.dD)("data-v-7bf9412f"),e=e(),(0,o.Cn)(),e),j=(0,o.Uk)("撤销"),W=(0,o.Uk)("重做"),R=(0,o.Uk)("预览"),H=(0,o.Uk)("保存"),P=(0,o.Uk)("清空画布"),E=(0,o.Uk)("锁定"),z=(0,o.Uk)("解锁"),A=O((()=>(0,o._)("span",{class:"f12 ml20 white lh25"},"画布大小：",-1))),F=O((()=>(0,o._)("span",{class:"f12 ml5 mr5 white lh25"},"*",-1))),q=O((()=>(0,o._)("span",{class:"f12 ml20 white lh25"},"画布比例：",-1))),T=O((()=>(0,o._)("span",{class:"f12 ml5 white lh25"},"%",-1)));var $={setup(e){const t=(0,a.oR)(),n="small",i=(0,o.Fl)((()=>t.state.public.canvasStyleData)),s=(0,o.Fl)((()=>t.state.component.componentData));let r=(0,l.iH)(!1);function p(){t.commit("public/setCanvasStyle",t.state.public.canvasStyleData)}function d(){t.dispatch("snapshot/undo")}function m(){t.dispatch("snapshot/redo")}function f(){console.log(s.value),localStorage.setItem("canvasStyle",JSON.stringify(i.value)),localStorage.setItem("canvasData",JSON.stringify(s.value)),(0,u.z8)({message:"保存成功！",type:"success"})}function v(){t.dispatch("lock/lock")}function h(){t.dispatch("lock/unLock")}function y(){r.value=!0,t.commit("public/setEditMode","preview")}function b(){t.commit("public/setEditMode","edit")}function g(){t.commit("component/setCurComponent",{component:null,index:null}),t.commit("component/setComponentData",[]),t.dispatch("snapshot/recordSnapshot")}return c.on("preview",y),c.on("save",f),c.on("clearCanvas",g),(e,t)=>{const a=(0,o.up)("el-button"),u=(0,o.up)("el-input"),c=(0,o.up)("el-row"),s=(0,o.up)("el-header");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(s,{class:"top-bar"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,{size:n,onClick:d},{default:(0,o.w5)((()=>[j])),_:1}),(0,o.Wm)(a,{size:n,onClick:m},{default:(0,o.w5)((()=>[W])),_:1}),(0,o.Wm)(a,{size:n,onClick:y},{default:(0,o.w5)((()=>[R])),_:1}),(0,o.Wm)(a,{size:n,onClick:f},{default:(0,o.w5)((()=>[H])),_:1}),(0,o.Wm)(a,{size:n,onClick:g},{default:(0,o.w5)((()=>[P])),_:1}),(0,o.Wm)(a,{size:n,onClick:v},{default:(0,o.w5)((()=>[E])),_:1}),(0,o.Wm)(a,{size:n,onClick:h},{default:(0,o.w5)((()=>[z])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[A,(0,o._)("span",null,[(0,o.Wm)(u,{size:n,class:"w60",modelValue:(0,l.SU)(i).width,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,l.SU)(i).width=e),onInput:p},null,8,["modelValue"])]),F,(0,o._)("span",null,[(0,o.Wm)(u,{size:n,class:"w60",modelValue:(0,l.SU)(i).height,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,l.SU)(i).height=e),onInput:p},null,8,["modelValue"])])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[q,(0,o._)("span",null,[(0,o.Wm)(u,{size:n,class:"w60",modelValue:(0,l.SU)(i).scale,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,l.SU)(i).scale=e),onInput:p},null,8,["modelValue"])]),T])),_:1})])),_:1})])),_:1}),(0,o.Wm)(L,{modelValue:(0,l.SU)(r),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,l.dq)(r)?r.value=e:r=e),onChange:b},null,8,["modelValue"])])}}};const Y=(0,k.Z)($,[["__scopeId","data-v-7bf9412f"]]);var Z=Y,B=n(2028);const K=["data-index"];var N={setup(e){function t(e){e.dataTransfer.setData("index",e.target.dataset.index)}return(e,n)=>((0,o.wg)(),(0,o.iD)("div",{class:"component-list",onDragstart:t},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,l.SU)(B["default"]),((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"list",draggable:!0,"data-index":t},[(0,o._)("span",{class:(0,s.C_)(["iconfont","icon-"+e.icon])},null,2),(0,o._)("span",null,(0,s.zw)(e.label),1)],8,K)))),128))],32))}};const X=(0,k.Z)(N,[["__scopeId","data-v-e1558f5c"]]);var G=X;const J={class:"grid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},Q=(0,o.uE)('<defs data-v-409611ac><pattern id="smallGrid" width="7.236328125" height="7.236328125" patternUnits="userSpaceOnUse" data-v-409611ac><path d="M 7.236328125 0 L 0 0 0 7.236328125" fill="none" stroke="rgba(207, 207, 207, 0.3)" stroke-width="1" data-v-409611ac></path></pattern><pattern id="grid" width="36.181640625" height="36.181640625" patternUnits="userSpaceOnUse" data-v-409611ac><rect width="36.181640625" height="36.181640625" fill="url(#smallGrid)" data-v-409611ac></rect><path d="M 36.181640625 0 L 0 0 0 36.181640625" fill="none" stroke="rgba(186, 186, 186, 0.5)" stroke-width="1" data-v-409611ac></path></pattern></defs><rect width="100%" height="100%" fill="url(#grid)" data-v-409611ac></rect>',2),ee=[Q];function te(e,t){return(0,o.wg)(),(0,o.iD)("svg",J,ee)}const ne={},oe=(0,k.Z)(ne,[["render",te],["__scopeId","data-v-409611ac"]]);var ae=oe,le=n(9242),ue=n(6171),ie=n(8082);const ce={lt:se,t:me,rt:re,r:fe,rb:pe,b:ve,lb:de,l:he};function se(e,t,n,o,a){const{symmetricPoint:l}=a;let u=d(t,l),i=p(t,u,-e.rotate),c=p(l,u,-e.rotate),s=c.x-i.x,r=c.y-i.y;if(o){s/r>n?(i.x+=Math.abs(s-r*n),s=r*n):(i.y+=Math.abs(r-s/n),r=s/n);const t=p(i,u,e.rotate);u=d(t,l),i=p(t,u,-e.rotate),c=p(l,u,-e.rotate),s=c.x-i.x,r=c.y-i.y}s>0&&r>0&&(e.width=Math.round(s),e.height=Math.round(r),e.left=Math.round(i.x),e.top=Math.round(i.y))}function re(e,t,n,o,a){const{symmetricPoint:l}=a;let u=d(t,l),i=p(t,u,-e.rotate),c=p(l,u,-e.rotate),s=i.x-c.x,r=c.y-i.y;if(o){s/r>n?(i.x-=Math.abs(s-r*n),s=r*n):(i.y+=Math.abs(r-s/n),r=s/n);const t=p(i,u,e.rotate);u=d(t,l),i=p(t,u,-e.rotate),c=p(l,u,-e.rotate),s=i.x-c.x,r=c.y-i.y}s>0&&r>0&&(e.width=Math.round(s),e.height=Math.round(r),e.left=Math.round(c.x),e.top=Math.round(i.y))}function pe(e,t,n,o,a){const{symmetricPoint:l}=a;let u=d(t,l),i=p(l,u,-e.rotate),c=p(t,u,-e.rotate),s=c.x-i.x,r=c.y-i.y;if(o){s/r>n?(c.x-=Math.abs(s-r*n),s=r*n):(c.y-=Math.abs(r-s/n),r=s/n);const t=p(c,u,e.rotate);u=d(t,l),i=p(l,u,-e.rotate),c=p(t,u,-e.rotate),s=c.x-i.x,r=c.y-i.y}s>0&&r>0&&(e.width=Math.round(s),e.height=Math.round(r),e.left=Math.round(i.x),e.top=Math.round(i.y))}function de(e,t,n,o,a){const{symmetricPoint:l}=a;let u=d(t,l),i=p(l,u,-e.rotate),c=p(t,u,-e.rotate),s=i.x-c.x,r=c.y-i.y;if(o){s/r>n?(c.x+=Math.abs(s-r*n),s=r*n):(c.y-=Math.abs(r-s/n),r=s/n);const t=p(c,u,e.rotate);u=d(t,l),i=p(l,u,-e.rotate),c=p(t,u,-e.rotate),s=i.x-c.x,r=c.y-i.y}s>0&&r>0&&(e.width=Math.round(s),e.height=Math.round(r),e.left=Math.round(c.x),e.top=Math.round(i.y))}function me(e,t,n,o,a){const{symmetricPoint:l,curPoint:u}=a,i=p(t,u,-e.rotate),c=p({x:u.x,y:i.y},u,e.rotate),s=Math.sqrt((c.x-l.x)**2+(c.y-l.y)**2),r={x:c.x-(c.x-l.x)/2,y:c.y+(l.y-c.y)/2};let d=e.width;o&&(d=s*n),e.width=d,e.height=Math.round(s),e.top=Math.round(r.y-s/2),e.left=Math.round(r.x-e.width/2)}function fe(e,t,n,o,a){const{symmetricPoint:l,curPoint:u}=a,i=p(t,u,-e.rotate),c=p({x:i.x,y:u.y},u,e.rotate),s=Math.sqrt((c.x-l.x)**2+(c.y-l.y)**2),r={x:c.x-(c.x-l.x)/2,y:c.y+(l.y-c.y)/2};let d=e.height;o&&(d=s/n),e.height=d,e.width=Math.round(s),e.top=Math.round(r.y-e.height/2),e.left=Math.round(r.x-s/2)}function ve(e,t,n,o,a){const{symmetricPoint:l,curPoint:u}=a,i=p(t,u,-e.rotate),c=p({x:u.x,y:i.y},u,e.rotate),s=Math.sqrt((c.x-l.x)**2+(c.y-l.y)**2),r={x:c.x-(c.x-l.x)/2,y:c.y+(l.y-c.y)/2};let d=e.width;o&&(d=s*n),e.width=d,e.height=Math.round(s),e.top=Math.round(r.y-s/2),e.left=Math.round(r.x-e.width/2)}function he(e,t,n,o,a){const{symmetricPoint:l,curPoint:u}=a,i=p(t,u,-e.rotate),c=p({x:i.x,y:u.y},u,e.rotate),s=Math.sqrt((c.x-l.x)**2+(c.y-l.y)**2),r={x:c.x-(c.x-l.x)/2,y:c.y+(l.y-c.y)/2};let d=e.height;o&&(d=s/n),e.height=d,e.width=Math.round(s),e.top=Math.round(r.y-e.height/2),e.left=Math.round(r.x-s/2)}function ye(e,t,n,o,a,l){ce[e](t,n,o,a,l)}function be(){const e=(e,t,n)=>{const{width:o,height:a}=t,l=/t/.test(e),u=/r/.test(e),i=/b/.test(e),c=/l/.test(e);let s=0,r=0;return 2==e.length?(s=l?0:a,r=c?0:o):((l||i)&&(s=l?0:a,r=o/2),(c||u)&&(s=a/2,r=c?0:o)),{marginTop:"-4px",marginLeft:"-4px",top:`${s}px`,left:`${r}px`,cursor:n[e]}};return{getPointStyle:e}}function ge(){const e=["lt","t","rt","r","rb","b","lb","l"],t={lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},n=[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],o=o=>{const a=f(o.style.rotate),l={};let u=-1;return e.forEach((e=>{const o=f(t[e]+a),i=n.length;while(1){u=(u+1)%i;const t=n[u];if(o>=338||o<23)return void(l[e]="nw-resize");if(t.start<=o&&o<t.end)return void(l[e]=t.cursor+"-resize")}})),l};return{pointList:e,getCursor:o}}const we=["onMousedown"];var xe={props:{element:{type:Object,default:()=>{}},isActive:{type:Boolean,default:!1},defaultStyle:{type:Object,default:()=>{}}},setup(e,{expose:t}){const n=e,{ctx:u}=(0,o.FN)(),i=(0,a.oR)(),c=(0,o.Fl)((()=>i.state.component.curComponent)),r=(0,o.Fl)((()=>i.state.compose.editor)),{element:p,defaultStyle:d}=(0,l.BK)(n),{getPointStyle:m}=be(),{pointList:f,getCursor:v}=ge();let h=(0,l.BK)((0,l.qj)({}));function y(e){return m(e,d.value,h)}function b(e){c.value&&(h=v(c.value),e&&u.$forceUpdate())}function g(e,t){i.commit("component/setClickComponentStatus",!0),t.stopPropagation(),t.preventDefault();const n={...d.value},{width:o,height:a,top:l,left:u}={...d.value},c=o/a,s={x:u+o/2,y:l+a/2},p=r.value.getBoundingClientRect(),m=t.target.getBoundingClientRect(),f={x:Math.round(m.left-p.left+t.target.offsetWidth/2),y:Math.round(m.top-p.top+t.target.offsetHeight/2)},v={x:s.x-(f.x-s.x),y:s.y-(f.y-s.y)};let h=!1,y=!0;const b=w(),g=t=>{if(y)return void(y=!1);h=!0;const o={x:t.clientX-p.left,y:t.clientY-p.top};ye(e,n,o,c,b,{center:s,curPoint:f,symmetricPoint:v}),i.commit("component/setShapeStyle",n)},x=()=>{h&&i.dispatch("snapshot/recordSnapshot"),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",x)}function w(){if("Group"!=p.value.component)return!1;const e=[0,90,180,360];for(const t of p.value.propValue)if(!e.includes(mod360(parseInt(t.style.rotate))))return!0;return!0}return(0,o.m0)((()=>{b()})),t({updateCursor:b}),(t,n)=>((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.isActive?(0,l.SU)(f):[],(e=>((0,o.wg)(),(0,o.iD)("div",{class:"shape-point",key:e,style:(0,s.j5)(y(e)),onMousedown:t=>g(e,t)},null,44,we)))),128))}};const Se=(0,k.Z)(xe,[["__scopeId","data-v-608a0f16"]]);var ke=Se,Ce={props:{active:{type:Boolean,default:!1},defaultStyle:{require:!0,type:Object,default:()=>{}},element:{type:Object,default:()=>{}},index:{require:!0,type:[Number,String],default:0}},setup(e){const t=e,n=(0,a.oR)(),u=(0,l.iH)(null),i=(0,o.Fl)((()=>n.state.component.curComponent)),r=(0,o.Fl)((()=>t.active&&!t.element.isLock)),{defaultStyle:p,element:d,index:m}=(0,l.BK)(t);let f=(0,l.iH)(null);function h(e){f.value=e}function y(e){e.stopPropagation(),e.preventDefault(),n.commit("contextmenu/hideContextmenu")}function b(e){n.commit("component/setClickComponentStatus",!0),e.preventDefault(),e.stopPropagation();const t={...p.value},o=e.clientX,a=e.clientY,l=t.rotate,i=shape.value.getBoundingClientRect(),c=i.left+i.width/2,s=i.top+i.height/2,r=180*Math.atan2(a-s,o-c)/Math.PI;let d=!1;const m=e=>{d=!0;const o=e.clientX,a=e.clientY,u=180*Math.atan2(a-s,o-c)/Math.PI;t.rotate=l+u-r,n.commit("component/setShapeStyle",t)},f=()=>{d&&n.dispatch("snapshot/recordSnapshot"),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",f),u.value.updateCursor(!0)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",f)}function g(e){if(n.commit("component/setClickComponentStatus",!0),"v-text"!=d.value.component&&"rect-shape"!=d.value.component&&e.preventDefault(),e.stopPropagation(),n.commit("component/setCurComponent",{component:d.value,index:m.value}),d.value.isLock)return;const t={...p.value},o=e.clientX,a=e.clientY,l=Number(t.top),u=Number(t.left);let i=!1;const c=e=>{i=!0;const c=e.clientX,s=e.clientY;t.top=s-a+l,t.left=c-o+u,n.dispatch("public/setShapeStyle",t)},s=()=>{i&&n.dispatch("snapshot/recordSnapshot"),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",s,!1)}return(0,o.bv)((()=>{c.on("runAnimation",(()=>{d.value==i.value&&v(f.value,i.value.animations)})),c.on("stopAnimation",(()=>{f.value.classList.remove("animated","infinite")}))})),(t,n)=>{const a=(0,o.up)("el-icon");return(0,o.wg)(),(0,o.iD)("div",{ref:h,class:(0,s.C_)(["shape",e.active]),onClick:y,onMousedown:g},[(0,o.wy)((0,o.Wm)(a,{size:25,color:"rgb(64, 158, 255)",class:"icon-xiangyouxuanzhuan",onMousedown:b},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(ue.Z))])),_:1},8,["color"]),[[le.F8,(0,l.SU)(r)]]),(0,o.wy)((0,o.Wm)(a,{class:"icon-suo"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(ie.Z))])),_:1},512),[[le.F8,(0,l.SU)(d).isLock]]),(0,o.Wm)(ke,{ref_key:"pointRef",ref:u,element:(0,l.SU)(d),isActive:(0,l.SU)(r),"default-style":(0,l.SU)(p)},null,8,["element","isActive","default-style"]),(0,o.WI)(t.$slots,"default")],34)}}};const Ue=(0,k.Z)(Ce,[["__scopeId","data-v-d3ba31ca"]]);var _e=Ue,De={setup(e){const t=(0,a.oR)(),n=(0,o.Fl)((()=>t.state.contextmenu.menuShow)),u=(0,o.Fl)((()=>t.state.contextmenu.menuTop)),i=(0,o.Fl)((()=>t.state.contextmenu.menuLeft)),c=(0,o.Fl)((()=>t.state.component.curComponent));function r(){t.commit("component/setClickComponentStatus",!0)}function p(){t.dispatch("copy/copy")}function d(){t.dispatch("copy/paste",!0),t.dispatch("snapshot/recordSnapshot")}function m(){t.dispatch("copy/cut")}function f(){t.commit("component/deleteComponent"),t.dispatch("snapshot/recordSnapshot")}function v(){t.dispatch("lock/lock")}function h(){t.dispatch("lock/unLock")}function y(){t.dispatch("layer/topComponent"),t.dispatch("snapshot/recordSnapshot")}function b(){t.dispatch("layer/bottomComponent"),t.dispatch("snapshot/recordSnapshot")}function g(){t.dispatch("layer/upComponent"),t.dispatch("snapshot/recordSnapshot")}function w(){t.dispatch("layer/downComponent"),t.dispatch("snapshot/recordSnapshot")}return(e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:"contextmenu",style:(0,s.j5)({top:`${(0,l.SU)(u)}px`,left:`${(0,l.SU)(i)}px`})},[(0,o._)("ul",{onMouseup:r},[(0,l.SU)(c)?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,l.SU)(c).isLock?((0,o.wg)(),(0,o.iD)("li",{key:1,onClick:h},"解锁")):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("li",{onClick:p},"复制"),(0,o._)("li",{onClick:d},"黏贴"),(0,o._)("li",{onClick:m},"剪切"),(0,o._)("li",{onClick:f},"删除"),(0,o._)("li",{onClick:v},"锁定"),(0,o._)("li",{onClick:y},"置顶"),(0,o._)("li",{onClick:b},"置底"),(0,o._)("li",{onClick:g},"上移"),(0,o._)("li",{onClick:w},"下移")],64))],64)):(0,o.kq)("",!0)],32)],4)),[[le.F8,(0,l.SU)(n)]])}};const Ve=(0,k.Z)(De,[["__scopeId","data-v-220057f6"]]);var Ie=Ve;const Me={class:"editor-body"};var Le={setup(e){const t=["top","left","width","height","rotate"],n=(0,a.oR)(),u=(0,o.Fl)((()=>n.state.public.canvasStyleData)),i=(0,o.Fl)((()=>n.state.component.componentData)),c=(0,o.Fl)((()=>n.state.component.curComponent));function r(e){e.stopPropagation(),e.preventDefault();let t=e.target,o=e.offsetY,a=e.offsetX;while(t instanceof SVGElement)t=t.parentNode;while(!t.className.includes("editor"))a+=t.offsetLeft,o+=t.offsetTop,t=t.parentNode;n.commit("contextmenu/showContextmenu",{top:o,left:a})}function p(e){(!c.value||"v-text"!=c.value.component&&"rect-shape"!=c.value)&&e.preventDefault()}function d(e){return g(e,t)}function f(e){return b(e,t)}function v(e){console.log(e)}return(e,t)=>((0,o.wg)(),(0,o.iD)("div",Me,[(0,o._)("div",{id:"editor",class:"editor",style:(0,s.j5)({width:`${(0,l.SU)(m)((0,l.SU)(u).width,(0,l.SU)(u).scale)}px`,height:`${(0,l.SU)(m)((0,l.SU)(u).height,(0,l.SU)(u).scale)}px`}),onContextmenu:r,onMousedown:p},[(0,o.Wm)(ae),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,l.SU)(i),((e,t)=>((0,o.wg)(),(0,o.j4)(_e,{key:e.id,"default-style":e.style,active:e.id===((0,l.SU)(c)||{}).id,element:e,index:t,top:e.style.top,style:(0,s.j5)(d(e.style)),class:(0,s.C_)({lock:e.isLock})},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)((0,o.LL)(e.component),{id:`component${e.id}`,class:"component",style:(0,s.j5)(f(e.style)),"prop-value":e.propValue,element:e,onInput:t=>v(e)},null,8,["id","style","prop-value","element","onInput"]))])),_:2},1032,["default-style","active","element","index","top","style","class"])))),128)),(0,o.Wm)(Ie)],36)]))}};const Oe=(0,k.Z)(Le,[["__scopeId","data-v-6bd66809"]]);var je=Oe;const We={class:"attr-list"};var Re={setup(e){const t=(0,a.oR)(),n=(0,o.Fl)((()=>t.state.component.curComponent)),u=(0,o.Fl)((()=>{if(n.value){const e=Object.keys(n.value.style);return y.filter((t=>e.includes(t.key)))}})),i=["textAlign","borderStyle","verticalAlign"],c=["Picture","Group"],s=[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}],r=[{label:"实线",value:"solid"},{label:"虚线",value:"dashed"}],p=[{label:"上对齐",value:"top"},{label:"居中对齐",value:"middle"},{label:"下对齐",value:"bottom"}];return(e,t)=>{const a=(0,o.up)("el-color-picker"),d=(0,o.up)("el-option"),m=(0,o.up)("el-select"),f=(0,o.up)("el-input"),v=(0,o.up)("el-form-item"),h=(0,o.up)("el-form");return(0,o.wg)(),(0,o.iD)("div",We,[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,l.SU)(u),(({key:e,label:t},u)=>((0,o.wg)(),(0,o.j4)(v,{key:u,label:t},{default:(0,o.w5)((()=>["borderColor"==e?((0,o.wg)(),(0,o.j4)(a,{key:0,modelValue:(0,l.SU)(n).style[e],"onUpdate:modelValue":t=>(0,l.SU)(n).style[e]=t},null,8,["modelValue","onUpdate:modelValue"])):"color"==e?((0,o.wg)(),(0,o.j4)(a,{key:1,modelValue:(0,l.SU)(n).style[e],"onUpdate:modelValue":t=>(0,l.SU)(n).style[e]=t},null,8,["modelValue","onUpdate:modelValue"])):"backgroundColor"==e?((0,o.wg)(),(0,o.j4)(a,{key:2,modelValue:(0,l.SU)(n).style[e],"onUpdate:modelValue":t=>(0,l.SU)(n).style[e]=t},null,8,["modelValue","onUpdate:modelValue"])):i.includes(e)?((0,o.wg)(),(0,o.j4)(m,{key:3,modelValue:(0,l.SU)(n).style[e],"onUpdate:modelValue":t=>(0,l.SU)(n).style[e]=t},{default:(0,o.w5)((()=>["textAlign"==e?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(s,(e=>(0,o.Wm)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64)):"borderStyle"==e?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(r,(e=>(0,o.Wm)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64)):"verticalAlign"==e?((0,o.wg)(),(0,o.iD)(o.HY,{key:2},(0,o.Ko)(p,(e=>(0,o.Wm)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64)):(0,o.kq)("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue"])):((0,o.wg)(),(0,o.j4)(f,{key:4,modelValue:(0,l.SU)(n).style[e],"onUpdate:modelValue":t=>(0,l.SU)(n).style[e]=t,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"]))])),_:2},1032,["label"])))),128)),(0,l.SU)(n)&&!c.includes((0,l.SU)(n).component)?((0,o.wg)(),(0,o.j4)(v,{key:0,label:"内容"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:(0,l.SU)(n).propValue,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,l.SU)(n).propValue=e),type:"textarea"},null,8,["modelValue"])])),_:1})):(0,o.kq)("",!0)])),_:1})])}}};const He=(0,k.Z)(Re,[["__scopeId","data-v-646ce79c"]]);var Pe=He,Ee=n(5092),ze={props:{modelValue:{type:Boolean,default:!1}},setup(e,{emit:t}){function n(){t("update:modelValue")}function a(e){e.stopPropagation()}return(t,l)=>e.modelValue?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"modal-bg",onClick:n},[(0,o._)("div",{class:"fadeInLeft animated modal",onClick:a},[(0,o.WI)(t.$slots,"default")])])):(0,o.kq)("",!0)}};const Ae=(0,k.Z)(ze,[["__scopeId","data-v-75fb0c1a"]]);var Fe=Ae;const qe={class:"time"},Te=(0,o.Uk)(" 动画时长："),$e={class:"loop"},Ye=(0,o.Uk)(" 是否循环："),Ze={slot:"footer",class:"dialog-footer"},Be=(0,o.Uk)("取 消"),Ke=(0,o.Uk)("确 定");var Ne={props:{curIndex:{type:Number,default:0}},emits:["close"],setup(e,{emit:t}){const n=e,u=(0,a.oR)(),i=(0,o.Fl)((()=>u.state.component.curComponent)),s=(0,o.Fl)((()=>i.value.animations.length>1));let r=(0,l.iH)({}),p=(0,l.iH)(!0);const{label:d,animationTime:m,isLoop:f=!1,value:v}=i.value.animations[n.curIndex]||{};function h(){t("close")}function y(){const{isLoop:e}=r.value;u.commit("animation/alterAnimation",{index:n.curIndex,data:{animationIndex:r.value.animationTime,isLoop:e}}),c.emit("stopAnimation"),h()}return r.value={animationTime:m,label:d,isLoop:f,value:v},(e,t)=>{const n=(0,o.up)("el-input-number"),a=(0,o.up)("el-switch"),u=(0,o.up)("el-button"),i=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.j4)(i,{title:`${(0,l.SU)(r).label} 动画配置`,modelValue:(0,l.SU)(p),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,l.dq)(p)?p.value=e:p=e),width:"30%",center:"",onClose:h},{default:(0,o.w5)((()=>[(0,o._)("div",qe,[Te,(0,o.Wm)(n,{modelValue:(0,l.SU)(r).animationTime,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,l.SU)(r).animationTime=e),"controls-position":"right",min:.1,precision:2,step:.01},null,8,["modelValue","min","step"])]),(0,o._)("div",$e,[Ye,(0,o.Wm)(a,{modelValue:(0,l.SU)(r).isLoop,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,l.SU)(r).isLoop=e),"active-text":"是","inactive-text":"否",disabled:(0,l.SU)(s)},null,8,["modelValue","disabled"])]),(0,o._)("span",Ze,[(0,o.Wm)(u,{onClick:h},{default:(0,o.w5)((()=>[Be])),_:1}),(0,o.Wm)(u,{type:"primary",onClick:y},{default:(0,o.w5)((()=>[Ke])),_:1})])])),_:1},8,["title","modelValue"])}}};const Xe=(0,k.Z)(Ne,[["__scopeId","data-v-0e9c76ec"]]);var Ge=Xe;const Je=[{label:"进入",children:[{label:"渐显",value:"fadeIn"},{label:"向右进入",value:"fadeInLeft"},{label:"向左进入",value:"fadeInRight"},{label:"向上进入",value:"fadeInUp"},{label:"向下进入",value:"fadeInDown"},{label:"向右长距进入",value:"fadeInLeftBig"},{label:"向左长距进入",value:"fadeInRightBig"},{label:"向上长距进入",value:"fadeInUpBig"},{label:"向下长距进入",value:"fadeInDownBig"},{label:"旋转进入",value:"rotateIn"},{label:"左顺时针旋转",value:"rotateInDownLeft"},{label:"右逆时针旋转",value:"rotateInDownRight"},{label:"左逆时针旋转",value:"rotateInUpLeft"},{label:"右逆时针旋转",value:"rotateInUpRight"},{label:"弹入",value:"bounceIn"},{label:"向右弹入",value:"bounceInLeft"},{label:"向左弹入",value:"bounceInRight"},{label:"向上弹入",value:"bounceInUp"},{label:"向下弹入",value:"bounceInDown"},{label:"光速从右进入",value:"lightSpeedIn"},{label:"光速从右退出",value:"lightSpeedOut"},{label:"中心X轴旋转",value:"flipInX"},{label:"中心Y轴旋转",value:"flipInY"},{label:"左长半径旋转",value:"rollIn"},{label:"由小变大进入",value:"zoomIn"},{label:"左变大进入",value:"zoomInLeft"},{label:"右变大进入",value:"zoomInRight"},{label:"向上变大进入",value:"zoomInUp"},{label:"向下变大进入",value:"zoomInDown"},{label:"向右滑动展开",value:"slideInLeft"},{label:"向左滑动展开",value:"slideInRight"},{label:"向上滑动展开",value:"slideInUp"},{label:"向下滑动展开",value:"slideInDown"}]},{label:"强调",children:[{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"放大缩小",value:"pulse"},{label:"放大缩小弹簧",value:"rubberBand"},{label:"左右晃动",value:"headShake"},{label:"左右扇形摇摆",value:"swing"},{label:"放大晃动缩小",value:"tada"},{label:"扇形摇摆",value:"wobble"},{label:"左右上下晃动",value:"jello"},{label:"Y轴旋转",value:"flip"}]},{label:"退出",children:[{label:"渐隐",value:"fadeOut"},{label:"向左退出",value:"fadeOutLeft"},{label:"向右退出",value:"fadeOutRight"},{label:"向上退出",value:"fadeOutUp"},{label:"向下退出",value:"fadeOutDown"},{label:"向左长距退出",value:"fadeOutLeftBig"},{label:"向右长距退出",value:"fadeOutRightBig"},{label:"向上长距退出",value:"fadeOutUpBig"},{label:"向下长距退出",value:"fadeOutDownBig"},{label:"旋转退出",value:"rotateOut"},{label:"左顺时针旋转",value:"rotateOutDownLeft"},{label:"右逆时针旋转",value:"rotateOutDownRight"},{label:"左逆时针旋转",value:"rotateOutUpLeft"},{label:"右逆时针旋转",value:"rotateOutUpRight"},{label:"弹出",value:"bounceOut"},{label:"向左弹出",value:"bounceOutLeft"},{label:"向右弹出",value:"bounceOutRight"},{label:"向上弹出",value:"bounceOutUp"},{label:"向下弹出",value:"bounceOutDown"},{label:"中心X轴旋转",value:"flipOutX"},{label:"中心Y轴旋转",value:"flipOutY"},{label:"左长半径旋转",value:"rollOut"},{label:"由小变大退出",value:"zoomOut"},{label:"左变大退出",value:"zoomOutLeft"},{label:"右变大退出",value:"zoomOutRight"},{label:"向上变大退出",value:"zoomOutUp"},{label:"向下变大退出",value:"zoomOutDown"},{label:"向左滑动收起",value:"slideOutLeft"},{label:"向右滑动收起",value:"slideOutRight"},{label:"向上滑动收起",value:"slideOutUp"},{label:"向下滑动收起",value:"slideOutDown"}]}];Je.forEach((e=>{e.children.forEach((e=>{e.pending=!1,e.animationTime=1}))}));var Qe=Je;const et={class:"animation-list"},tt={class:"div-animation"},nt=(0,o.Uk)("添加动画"),ot=(0,o.Uk)("预览动画"),at=["onMouseenter","onClick"];var lt={setup(e){const t=(0,a.oR)(),n=(0,o.Fl)((()=>t.state.component.curComponent));let u=(0,l.iH)(!1),i="进入",r=(0,l.iH)(!1),p=(0,l.iH)(0);const d=(0,l.iH)([]),m=e=>{d.value.push(e)};function f(e){t.dispatch("animation/addAnimation",e),u.value=!1}function h(){c.emit("runAnimation")}function y(e){t.dispatch("animation/removeAnimation",e),n.value.animations.length||c.emit("stopAnimation")}function b(e){r.value=!0,p.value=e}async function g(e,t){e.pending||(e.pending=!0,await v(d.value[t],[e]),setTimeout((()=>{e.pending=!1}),100))}return(e,t)=>{const a=(0,o.up)("el-button"),c=(0,o.up)("el-icon"),d=(0,o.up)("el-tag"),v=(0,o.up)("el-scrollbar"),w=(0,o.up)("el-tab-pane"),x=(0,o.up)("el-tabs");return(0,o.wg)(),(0,o.iD)("div",et,[(0,o._)("div",tt,[(0,o.Wm)(a,{onClick:t[0]||(t[0]=e=>(0,l.dq)(u)?u.value=!0:u=!0)},{default:(0,o.w5)((()=>[nt])),_:1}),(0,o.Wm)(a,{onClick:h},{default:(0,o.w5)((()=>[ot])),_:1}),(0,o._)("div",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,l.SU)(n).animations,((e,t)=>((0,o.wg)(),(0,o.j4)(d,{key:t,closable:"",onClose:e=>y(t)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.label)+" ",1),(0,o.Wm)(c,{class:"cursor el-icon-setting",onClick:e=>b(t)},{default:(0,o.w5)((()=>[(0,o.Wm)((0,l.SU)(Ee.Z))])),_:2},1032,["onClick"])])),_:2},1032,["onClose"])))),128))])]),(0,o.Wm)(Fe,{modelValue:(0,l.SU)(u),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,l.dq)(u)?u.value=e:u=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{modelValue:(0,l.SU)(i),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,l.dq)(i)?i.value=e:i=e)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,l.SU)(Qe),(e=>((0,o.wg)(),(0,o.j4)(w,{key:e.label,label:e.label,name:e.label},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{class:"animate-container"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.children,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{ref_for:!0,ref:m,key:e.value,class:"animate",onMouseenter:n=>g(e,t),onClick:t=>f(e)},[(0,o._)("div",null,(0,s.zw)(e.label),1)],40,at)))),128))])),_:2},1024)])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"]),(0,l.SU)(r)?((0,o.wg)(),(0,o.j4)(Ge,{key:0,"cur-index":(0,l.SU)(p),onClose:t[3]||(t[3]=e=>(0,l.dq)(r)?r.value=!1:r=!1)},null,8,["cur-index"])):(0,o.kq)("",!0)])}}};const ut=lt;var it=ut;const ct={class:"event-list"},st={class:"div-events"},rt=(0,o.Uk)("添加事件"),pt=(0,o.Uk)("确定");var dt={setup(e){const t=(0,a.oR)(),n=(0,o.Fl)((()=>t.state.component.curComponent));let u=(0,l.iH)(!1),i=((0,l.iH)(""),(0,l.iH)("redirect"));function c(e,n){u.value=!1,t.dispatch("event/addEvent",{event:e,param:n})}function r(e){t.dispatch("event/removeEvent",e)}return(e,t)=>{const a=(0,o.up)("el-button"),p=(0,o.up)("el-tag"),d=(0,o.up)("el-input"),m=(0,o.up)("el-tab-pane"),f=(0,o.up)("el-tabs");return(0,o.wg)(),(0,o.iD)("div",ct,[(0,o._)("div",st,[(0,o.Wm)(a,{onClick:t[0]||(t[0]=e=>(0,l.dq)(u)?u.value=!0:u=!0)},{default:(0,o.w5)((()=>[rt])),_:1}),(0,o._)("div",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.keys((0,l.SU)(n).events),(e=>((0,o.wg)(),(0,o.j4)(p,{key:e,closable:"",onClose:t=>r(e)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e),1)])),_:2},1032,["onClose"])))),128))])]),(0,o.Wm)(Fe,{modelValue:(0,l.SU)(u),"onUpdate:modelValue":t[4]||(t[4]=e=>(0,l.dq)(u)?u.value=e:u=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:(0,l.SU)(i),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,l.dq)(i)?i.value=e:i=e)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,l.SU)(x),(e=>((0,o.wg)(),(0,o.j4)(m,{key:e.key,label:e.label,name:e.key,style:{padding:"0 20px"}},{default:(0,o.w5)((()=>["redirect"==e.key?((0,o.wg)(),(0,o.j4)(d,{key:0,modelValue:e.param,"onUpdate:modelValue":t=>e.param=t,type:"textarea",placeholder:"请输入完整的 URL",onKeydown:t[1]||(t[1]=(0,le.D2)((0,le.iM)((()=>{}),["stop"]),["native"]))},null,8,["modelValue","onUpdate:modelValue"])):(0,o.kq)("",!0),"alert"==e.key?((0,o.wg)(),(0,o.j4)(d,{key:1,modelValue:e.param,"onUpdate:modelValue":t=>e.param=t,type:"textarea",placeholder:"请输入要 alert 的内容",onKeydown:t[2]||(t[2]=(0,le.D2)((0,le.iM)((()=>{}),["stop"]),["native"]))},null,8,["modelValue","onUpdate:modelValue"])):(0,o.kq)("",!0),(0,o.Wm)(a,{style:{"margin-top":"20px"},onClick:t=>c(e.key,e.param)},{default:(0,o.w5)((()=>[pt])),_:2},1032,["onClick"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])}}};const mt=(0,k.Z)(dt,[["__scopeId","data-v-08508c34"]]);var ft=mt;const vt={key:1,class:"placeholder"},ht={key:1,class:"placeholder"},yt={key:1,class:"placeholder"};var bt={setup(e){const t=(0,a.oR)(),n=(0,o.Fl)((()=>t.state.component.curComponent)),u=(0,l.iH)("attr");return(e,t)=>{const a=(0,o.up)("el-tab-pane"),i=(0,o.up)("el-tabs");return(0,o.wg)(),(0,o.j4)(i,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(a,{label:"属性",name:"attr"},{default:(0,o.w5)((()=>[(0,l.SU)(n)?((0,o.wg)(),(0,o.j4)(Pe,{key:0})):((0,o.wg)(),(0,o.iD)("p",vt,"请选择组件"))])),_:1}),(0,o.Wm)(a,{label:"动画",name:"animation"},{default:(0,o.w5)((()=>[(0,l.SU)(n)?((0,o.wg)(),(0,o.j4)(it,{key:0})):((0,o.wg)(),(0,o.iD)("p",ht,"请选择组件"))])),_:1}),(0,o.Wm)(a,{label:"事件",name:"events"},{default:(0,o.w5)((()=>[(0,l.SU)(n)?((0,o.wg)(),(0,o.j4)(ft,{key:0})):((0,o.wg)(),(0,o.iD)("p",yt,"请选择组件"))])),_:1})])),_:1},8,["modelValue"])}}};const gt=(0,k.Z)(bt,[["__scopeId","data-v-58c59124"]]);var wt=gt,xt=n(2648);const St={class:"home"};var kt={setup(e){const t=(0,a.oR)(),n=(0,o.Fl)((()=>t.state.compose.editor)),l=(0,o.Fl)((()=>t.state.component.isClickComponent));function u(){const e=localStorage.getItem("canvasStyle"),n=localStorage.getItem("canvasData");e&&t.commit("public/setCanvasStyle",JSON.parse(e)),n&&t.commit("component/setComponentData",JSON.parse(n).map((e=>({...e,id:(0,xt.y)()}))))}function i(e){e.preventDefault(),e.stopPropagation();const o=e.dataTransfer.getData("index"),a=n.value.getBoundingClientRect();if(void 0!=o&&""!=o){const n=(0,xt.p$)(B["default"][o]);n.style.top=e.y-a.y,n.style.left=e.x-a.x,n.id=(0,xt.y)(),t.commit("component/addComponent",{component:n}),t.dispatch("snapshot/recordSnapshot")}}function c(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"}function s(){t.commit("component/setClickComponentStatus",!1)}function r(e){l.value||t.commit("component/setCurComponent",{component:null,index:null}),2!=e.button&&t.commit("contextmenu/hideContextmenu")}return u(),(0,o.bv)((()=>{t.commit("compose/getEditor","#editor")})),(e,t)=>{const n=(0,o.up)("el-aside"),a=(0,o.up)("el-main"),l=(0,o.up)("el-container");return(0,o.wg)(),(0,o.iD)("div",St,[(0,o.Wm)(Z),(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(n,{width:"200px"},{default:(0,o.w5)((()=>[(0,o.Wm)(G)])),_:1}),(0,o.Wm)(a,{class:"editor-canvas"},{default:(0,o.w5)((()=>[(0,o._)("div",{class:"editor-content",onDrop:i,onDragover:c,onMousedown:s,onMouseup:r},[(0,o.Wm)(je)],32)])),_:1}),(0,o.Wm)(n,{width:"260px"},{default:(0,o.w5)((()=>[(0,o.Wm)(wt)])),_:1})])),_:1})])}}};const Ct=(0,k.Z)(kt,[["__scopeId","data-v-37b0c351"]]);var Ut=Ct},3578:function(e,t,n){var o={"./":2059,"./Picture":3192,"./Picture.vue":3192,"./RectShape":6442,"./RectShape.vue":6442,"./VButton":9958,"./VButton.vue":9958,"./VText":4169,"./VText.vue":4169,"./component-list":2028,"./component-list.js":2028,"./index":2059,"./index.js":2059};function a(e){var t=l(e);return n(t)}function l(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=l,e.exports=a,a.id=3578},862:function(e,t,n){"use strict";e.exports=n.p+"img/title.07a15c19.jpg"}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,l){if(!o){var u=1/0;for(r=0;r<e.length;r++){o=e[r][0],a=e[r][1],l=e[r][2];for(var i=!0,c=0;c<o.length;c++)(!1&l||u>=l)&&Object.keys(n.O).every((function(e){return n.O[e](o[c])}))?o.splice(c--,1):(i=!1,l<u&&(u=l));if(i){e.splice(r--,1);var s=a();void 0!==s&&(t=s)}}return t}l=l||0;for(var r=e.length;r>0&&e[r-1][2]>l;r--)e[r]=e[r-1];e[r]=[o,a,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,l,u=o[0],i=o[1],c=o[2],s=0;if(u.some((function(t){return 0!==e[t]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(c)var r=c(n)}for(t&&t(o);s<u.length;s++)l=u[s],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(r)},o=self["webpackChunkvisual_drag_vue3"]=self["webpackChunkvisual_drag_vue3"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(4769)}));o=n.O(o)})();
//# sourceMappingURL=app.880be77a.js.map